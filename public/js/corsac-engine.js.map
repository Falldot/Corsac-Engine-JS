{
  "version": 3,
  "sources": ["../../src/CSM/Rect.js", "../../src/CSM/Manager.js", "../../src/CSM/Easle.js", "../../src/corsac-engine.js"],
  "sourcesContent": ["/* eslint-disable no-extra-parens */\r\n/* eslint-disable sort-vars */\r\nconst randomInt = range => Math.floor(Math.random() * range);\r\nconst easeOutBounce = x => {\r\n    const n1 = 7.5625;\r\n    const d1 = 2.75;\r\n\r\n    if (x < 1 / d1) {\r\n        return n1 * x * x;\r\n    } else if (x < 2 / d1) {\r\n        return n1 * (x -= 1.5 / d1) * x + 0.75;\r\n    } else if (x < 2.5 / d1) {\r\n        return n1 * (x -= 2.25 / d1) * x + 0.9375;\r\n    } else {\r\n        return n1 * (x -= 2.625 / d1) * x + 0.984375;\r\n    }\r\n}\r\n\r\nconst easeInOutBounce = x => {\r\n    return x < 0.5\r\n      ? 1-(1 - easeOutBounce(1 - 2 * x)) / 2\r\n      : (1 + easeOutBounce(2 * x - 1)) / 2;\r\n}\r\n\r\nconst easeOutElastic = x => {\r\n    return 1 - Math.sqrt(1 - Math.pow(x, 2));\r\n}\r\n    \r\n\r\n\r\nmodule.exports = class Rect {\r\n    r = 1; \r\n    g = 0.66;\r\n    b = 0.33; \r\n    a = 1;\r\n\r\n    constructor(x, y, w, h, Callback,) {\r\n        this.x = x;\r\n        this.y = y;\r\n        this.w = w;\r\n        this.h = h;\r\n        this.Callback = Callback;\r\n    }\r\n\r\n    SetColor(r, g, b, a = 1){\r\n        this.r = r;\r\n        this.g = g;\r\n        this.b = b;\r\n        this.a = a;\r\n    }\r\n\r\n    Draw(gl) {\r\n        gl.bufferData(gl.ARRAY_BUFFER, new Float32Array(this.GetValue()), gl.STATIC_DRAW);\r\n        gl.drawArrays(gl.TRIANGLES, 0, 6);\r\n    }\r\n\r\n    GetValue() {\r\n        return [\r\n            this.x,             this.y,\r\n            this.x + this.w,    this.y,\r\n            this.x,             this.y + this.h,\r\n            this.x,             this.y + this.h,\r\n            this.x + this.w,    this.y,\r\n            this.x + this.w,    this.y + this.h,\r\n        ];\r\n    }\r\n};", "module.exports = class Manager{\r\n    \r\n    figures = new Array(100);\r\n    figuresPointer = 0;\r\n    constructor(gl, color){\r\n        this.gl = gl;\r\n        this.color = color;\r\n    }\r\n\r\n    AddFigure(figure){\r\n        if(this.figures.length === this.figuresPointer){\r\n            this.figures[this.figures.length*2] = undefined;\r\n        }\r\n        this.figures[this.figuresPointer] = figure;\r\n        this.figuresPointer++;\r\n    }\r\n\r\n    AddFigures(...figures){\r\n        for(let i = 0; i < figures.length; i++){    \r\n            this.AddFigure(figures[i]);\r\n        }\r\n    }\r\n\r\n    DrawAll(){\r\n        for(let i = 0; i < this.figuresPointer; i++){\r\n            if(this.figures[i].hasOwnProperty(\"Callback\")) this.figures[i].Callback(this.figures[i]);\r\n            this.gl.uniform4f(      this.color,\r\n                                    this.figures[i].r,\r\n                                    this.figures[i].g,\r\n                                    this.figures[i].b,    \r\n                                    this.figures[i].a\r\n            );\r\n            this.figures[i].Draw(this.gl);\r\n        }\r\n    }\r\n\r\n\r\n}", "\r\nconst EaseOutBounce = x => {\r\n    const n1 = 7.5625;\r\n    const d1 = 2.75;\r\n\r\n    if (x < 1 / d1) {\r\n        return n1 * x * x;\r\n    } else if (x < 2 / d1) {\r\n        return n1 * (x -= 1.5 / d1) * x + 0.75;\r\n    } else if (x < 2.5 / d1) {\r\n        return n1 * (x -= 2.25 / d1) * x + 0.9375;\r\n    } else {\r\n        return n1 * (x -= 2.625 / d1) * x + 0.984375;\r\n    }\r\n}\r\n\r\nconst EaseInOutBounce = x => {\r\n    return x < 0.5\r\n      ? 1-(1 - EaseOutBounce(1 - 2 * x)) / 2\r\n      : (1 + EaseOutBounce(2 * x - 1)) / 2;\r\n}\r\n\r\nconst EaseOutElastic = x => {\r\n    return 1 - Math.sqrt(1 - Math.pow(x, 2));\r\n}\r\n    \r\n\r\nmodule.exports = {\r\n    EaseOutBounce,\r\n    EaseInOutBounce,\r\n    EaseOutElastic\r\n}", "const shader1 = require(\"./shader1.glsl\");\r\nconst shader2 = require(\"./shader2.glsl\");\r\nconst Rect    = require(\"./CSM/Rect\");\r\nconst Manager = require(\"./CSM/Manager\");\r\nconst {EaseOutElastic, EaseInOutBounce, EaseOutBounce }     = require(\"./CSM/Easle\");\r\n\r\nconst resize = canvas => {\r\n    canvas.width = document.body.clientWidth;\r\n    canvas.height = document.body.clientHeight;\r\n};\r\n\r\nwindow.addEventListener(`resize`, () => {\r\n    resize(document.getElementById(\"root\"));\r\n}, false);\r\n\r\nconst createShader = (gl, type, source) => {\r\n    const shader = gl.createShader(type);\r\n    gl.shaderSource(shader, source);\r\n    gl.compileShader(shader);\r\n    const success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\r\n    if (success) {\r\n        return shader;\r\n    }\r\n    console.log(\"error\");\r\n    gl.deleteShader(shader);\r\n};\r\n\r\nconst createProgram = (gl, vertexShader, fragmentShader) => {\r\n    const program = gl.createProgram();\r\n    gl.attachShader(program, vertexShader);\r\n    gl.attachShader(program, fragmentShader);\r\n    gl.linkProgram(program);\r\n    const success = gl.getProgramParameter(program, gl.LINK_STATUS);\r\n    if (success) {\r\n        return program;\r\n    }\r\n    console.log(\"error\");\r\n    gl.deleteProgram(program);\r\n};\r\n\r\nconst randomInt = range => Math.floor(Math.random() * range);\r\n\r\nconst CreateResize = (obj, x, y, w, h, t) => {\r\n    const   turnX = (x - obj.x) / (t * 60),\r\n            turnY = (y - obj.y) / (t * 60),\r\n            turnW = (w - obj.w) / (t * 60),\r\n            turnH = (h - obj.w) / (t * 60);\r\n\r\n\r\n\r\n    const loop = setInterval(() => {\r\n        obj.x += turnX;\r\n        obj.y += turnY;\r\n        obj.w += turnW;\r\n        obj.h += turnH;\r\n    }, 1000 / 60);\r\n\r\n    setTimeout(() => {\r\n        clearInterval(loop);\r\n        const   canvas = document.querySelector(\"#root\"),\r\n                nX = randomInt(canvas.width),\r\n                nY = randomInt(canvas.height),\r\n                nW = randomInt(canvas.width - x),\r\n                nH = randomInt(canvas.height - y);\r\n        CreateResize(obj, nX, nY, nW, nH, t);\r\n    }, t * 1000);\r\n}\r\n\r\nconst main = () => {\r\n    const canvas = document.querySelector(\"#root\");\r\n    const gl = canvas.getContext(\"webgl\");\r\n    resize(canvas);\r\n\r\n    const vertexShader = createShader(gl, gl.VERTEX_SHADER, shader1);\r\n    const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, shader2);\r\n\r\n    const program = createProgram(gl, vertexShader, fragmentShader);\r\n    const positionAttributeLocation = gl.getAttribLocation(program, \"a_position\");\r\n    const resolutionUniformLocation = gl.getUniformLocation(program, \"u_resolution\");\r\n    const color = gl.getUniformLocation(program, \"v_color\");\r\n\r\n    const positionBuffer = gl.createBuffer();\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n    gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);\r\n\r\n    gl.clearColor(0, 0, 0, 0);\r\n    gl.clear(gl.COLOR_BUFFER_BIT);\r\n\r\n    gl.useProgram(program);\r\n\r\n    gl.enableVertexAttribArray(positionAttributeLocation);\r\n\r\n    gl.bindBuffer(gl.ARRAY_BUFFER, positionBuffer);\r\n\r\n    const size = 2;\r\n    const type = gl.FLOAT;\r\n    const normalize = false;\r\n    const stride = 0;\r\n    const offset = 0;\r\n    gl.vertexAttribPointer(positionAttributeLocation, size, type, normalize, stride, offset);\r\n\r\n    gl.uniform2f(resolutionUniformLocation, gl.canvas.width, gl.canvas.height);\r\n    const rects = [];\r\n\r\n    for (let ii = 0; ii < 500; ++ii) {\r\n        const   x = randomInt(canvas.width),\r\n                y = randomInt(canvas.height),\r\n                w = randomInt(canvas.width - x),\r\n                h = randomInt(canvas.height - y);\r\n        rects.push(new Rect(x, y, w, h, obj=>{\r\n            obj.SetColor(\r\n                EaseOutBounce(obj.x/canvas.width),\r\n                EaseOutElastic(obj.y/canvas.height),\r\n                EaseInOutBounce((obj.x+obj.y)/(canvas.width+canvas.height)),\r\n            );\r\n        }));\r\n        \r\n        CreateResize(rects[ii], x, y, w, h, 1);\r\n    }\r\n\r\n    const manager = new Manager(gl, color);\r\n    manager.AddFigures(...rects);\r\n    let fps;\r\n    const animation = () =>{\r\n        window.requestAnimationFrame(()=>{\r\n            let t = performance.now();\r\n            manager.DrawAll();\r\n            animation();\r\n            fps = performance.now() - t;\r\n        });\r\n    }\r\n    animation();\r\n    window.addEventListener(\"click\", ()=>console.log(fps))\r\n};\r\nmain();"],
  "mappings": "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",
  "names": []
}
