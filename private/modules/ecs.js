var P=typeof require!="undefined"?require:s=>{throw new Error('Dynamic require of "'+s+'" is not supported')};var o=(s,t)=>()=>(t||s((t={exports:{}}).exports,t),t.exports);var _=o((g,a)=>{a.exports=class{constructor(){this._packed=new Array,this._sparse=new Array}Has(t){return this._sparse[t]<this._packed.length&&this._packed[this._sparse[t]]==t}Add(t){this.Has(t)||(this._sparse[t]=this._packed.length,this._packed.push(t))}Remove(t){if(!this.Has(t))return;let e=this._packed.pop();t!==e&&(this._sparse[e]=this._sparse[t],this._packed[this._sparse[t]]=e)}}});var u=o((H,l)=>{var w=_(),c=class{constructor(t){this._set=new w,this._parents=Array(),this._components=t}_add(t){this._set.Add(t);for(let e=0;e<this._parents.length;e++)this._parents[e]._add(t)}Extends(...t){for(let e=0;e<t.length;e++){this._parents.push(t[e]);for(let n=0;n<t[e]._components.length;n++){let i=!0;for(let r=0;r<this._components.length;r++)t[e]._components[n]===this._components[r]&&(i=!1);i&&this._components.push(t[e]._components[n])}}return this}_remove(t){this._set.Remove(t);for(let e=0;e<this._parents.length;e++)this._parents[e]._remove(t)}},p=class{constructor(t,e){this._set={_packed:t},this._components=e,this._parents=Array()}Extends(...t){for(let e=0;e<t.length;e++){this._parents.push(t[e]),t[e]._add(this._set._packed);for(let n=0;n<t[e]._components.length;n++){let i=!0;for(let r=0;r<this._components.length;r++)t[e]._components[n]===this._components[r]&&(i=!1);i&&this._components.push(t[e]._components[n])}}return this}};l.exports={Group:c,Unique:p}});var m=o((j,f)=>{f.exports=class{constructor(t){this._count=0,this._pool=new Array,this._max=t}Size(){return this._max}Put(t){this._pool.push(t)}Pop(){return this._pool.length===0?this._create():this._pool.pop()}_create(){if(this._max<=this._count)throw new Error("Been hitting the limit! => "+this._max);return this._count++}}});var h=o((F,d)=>{var C={any:Array,int8:Int8Array,uint8:Uint8Array,int16:Int16Array,uint16:Uint16Array,int32:Int32Array,uint32:Uint32Array,float32:Float32Array,float64:Float64Array},k=(s,t)=>{if(typeof s=="object"){for(let e in s)s[e]=new s[e](t);return s}else{if(typeof s=="function")return new s(t);throw new Error("Invalid type format! => "+s)}};d.exports={types:C,TypeContainer:k}});var A=o((b,y)=>{var{Group:S,Unique:q}=u(),E=m(),{TypeContainer:v}=h();y.exports=class{constructor(t=1e4){this._entities=new E(t)}CreateComponent(t){return v(t,this._entities.Size())}CreateGroup(...t){return new S(t)}CreateUniqueEntity(...t){return new q(this._entities.Pop(),t)}CreateEntity(...t){let e=this._entities.Pop();for(let n=0;n<t.length;n++)t[n]._add(e);return this}RemoveEntity(t,...e){for(let n=0;n<e.length;n++)e[n]._remove(t);return this._entities.Put(t),this}CreateSystem(t,e){return()=>{e(t._set._packed,...t._components)}}}});var I=A(),{types:x}=h();module.exports={ECS:I,types:x};
